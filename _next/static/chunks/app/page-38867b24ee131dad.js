(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2836:(t,e,i)=>{Promise.resolve().then(i.bind(i,9167))},9167:(t,e,i)=>{"use strict";i.d(e,{default:()=>m});var a=i(5155),l=i(2115);class n{flap(){this.velocityY=this.lift}update(){this.velocityY+=this.gravity,this.y+=this.velocityY,this.y+this.height>this.groundY&&(this.y=this.groundY-this.height,this.velocityY=0),this.y<0&&(this.y=0,this.velocityY=0)}draw(t,e){let i=this.x,a=this.y,l=.8*this.width,n=this.height,r=.3*this.height,s=.4*this.height,o=.6*this.height,h=Math.max(2,this.width/18);t.save();let c=e?"#999999":"#F96574";e||(t.strokeStyle="#333333",t.lineWidth=h,t.lineCap="round",t.beginPath(),t.moveTo(i+.4*l,a+.7*n),t.lineTo(i+.2*l,a+.7*n+.5*o),t.lineTo(i+.3*l,a+.7*n+o),t.stroke(),t.beginPath(),t.moveTo(i+.6*l,a+.7*n),t.lineTo(i+.5*l,a+.7*n+.6*o),t.lineTo(i+.65*l,a+.7*n+o),t.stroke()),t.fillStyle=c,t.beginPath(),t.ellipse(i+l/2,a+n/2,l/2,n/2.2,0,0,2*Math.PI),t.fill(),t.strokeStyle=c,t.lineWidth=.8*r,t.beginPath(),t.moveTo(i+.7*l,a+.3*n),t.quadraticCurveTo(i+.9*l+.5*s,a-.2*s,i+.75*l+s,a-.3*s+r),t.stroke();let u=i+.75*l+s,d=a-.3*s;t.fillStyle=c,t.beginPath(),t.arc(u,d,r,0,2*Math.PI),t.fill(),t.fillStyle="#333333",t.beginPath(),t.moveTo(u+1.5*r,d),t.lineTo(u+.8*r,d-.3*r),t.lineTo(u+.8*r,d+.3*r),t.closePath(),t.fill(),t.fillStyle="#000000",t.beginPath(),t.arc(u+.2*r,d-.1*r,.2*r,0,2*Math.PI),t.fill(),t.restore()}getBounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}constructor(t,e,i){this.x=t,this.width=45,this.height=35,this.y=e,this.velocityY=0,this.gravity=.5,this.lift=-10,this.groundY=i}}class r{reset(t){let{x:e,y:i,height:a,width:l,gap:n,speed:r,canvasHeight:s}=t;this.x=e,this.y=i,this.height=a,this.width=l,this.gap=n,this.speed=r,this.canvasHeight=s,this.passed=!1,this.topHeight=a,this.isActive=!0}update(){this.x-=this.speed}draw(t){t.fillStyle="#A98467",t.fillRect(this.x,0,this.width,this.height);let e=this.height+this.gap,i=this.canvasHeight-e;t.fillRect(this.x,e,this.width,i),t.fillStyle="#72B043";let a=1.2*this.width,l=.3*this.width,n=this.x+this.width/2,r=this.height;for(let e=0;e<5;e++){t.beginPath();let i=Math.PI/2+Math.PI/7.5*(e-2);t.moveTo(n,r-l/2);let s=n+Math.cos(i-Math.PI/16)*a*.5,o=r+Math.sin(i-Math.PI/16)*a*.5,h=n+Math.cos(i)*a,c=r+Math.sin(i)*a,u=n+Math.cos(i+Math.PI/8)*l*.5,d=r+Math.sin(i+Math.PI/8)*l*.5;t.quadraticCurveTo(s,o,h,c),t.lineTo(u,d),t.closePath(),t.fill()}let s=this.x+this.width/2;for(let i=0;i<5;i++){t.beginPath();let n=-Math.PI/2+Math.PI/7.5*(i-2);t.moveTo(s,e+l/2);let r=s+Math.cos(n-Math.PI/16)*a*.5,o=e+Math.sin(n-Math.PI/16)*a*.5,h=s+Math.cos(n)*a,c=e+Math.sin(n)*a,u=s+Math.cos(n+Math.PI/8)*l*.5,d=e+Math.sin(n+Math.PI/8)*l*.5;t.quadraticCurveTo(r,o,h,c),t.lineTo(u,d),t.closePath(),t.fill()}}isOffScreen(){return this.x+this.width<0}deactivate(){this.isActive=!1}getBoundsTop(){return{x:this.x,y:0,width:this.width,height:this.topHeight}}getBoundsBottom(){let t=this.topHeight+this.gap,e=this.canvasHeight-t;return{x:this.x,y:t,width:this.width,height:e}}getBounds(){return[{x:this.x,y:0,width:this.width,height:this.topHeight},{x:this.x,y:this.topHeight+this.gap,width:this.width,height:this.canvasHeight-this.topHeight-this.gap}]}constructor({x:t,y:e,height:i,width:a,gap:l,speed:n,canvasHeight:r}){this.x=t,this.y=e,this.height=i,this.width=a,this.gap=l,this.speed=n,this.canvasHeight=r,this.passed=!1,this.topHeight=i,this.isActive=!0}}let s=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=Math.floor(Math.random()*(e-160-50-50+1))+50,l={x:t,y:a,height:a,width:70,gap:160,speed:3,canvasHeight:e},n=i.find(t=>!t.isActive);return n?(n.reset(l),n):new r(l)},o={flap:null,score:null,gameOver:null,backgroundMusic:null},h=!1,c=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((a,l)=>{{let n=new Audio(e);n.loop=i,n.oncanplaythrough=()=>{o[t]=n,a()},n.onerror=i=>{console.error("Error loading sound: ".concat(t," from ").concat(e),i),l(Error("Failed to load sound: ".concat(t)))}}})},u=async()=>{try{await Promise.all([c("flap","/sounds/flap.wav"),c("score","/sounds/score.wav"),c("gameOver","/sounds/gameOver.wav"),c("backgroundMusic","/sounds/music.mp3",!0)]),console.log("All sounds loaded successfully")}catch(t){console.error("Error initializing audio:",t)}},d=t=>{if(h)return;let e=o[t];e?(e.currentTime=0,e.play().catch(e=>console.error("Error playing sound ".concat(t,":"),e))):console.warn("Sound not loaded or found: ".concat(t))},g=t=>{let e=o[t];e&&(e.pause(),e.currentTime=0)},f=()=>((h=!h)?o.backgroundMusic&&!o.backgroundMusic.paused&&o.backgroundMusic.pause():o.backgroundMusic&&o.backgroundMusic.play().catch(t=>console.error("Error playing background music after unmute:",t)),h),p=()=>h;u();let x={sky:"#87CEEB",sun:"#FFD54D",sand:"#FFEEAD",textDark:"#4A3B31",textLight:"#FFFFFF",accentCoral:"#FF6F69"};var y=function(t){return t[t.Start=0]="Start",t[t.Playing=1]="Playing",t[t.Paused=2]="Paused",t[t.GameOver=3]="GameOver",t}(y||{});let m=()=>{let t=(0,l.useRef)(null),e=(0,l.useRef)(null),[i,r]=(0,l.useState)(0),[o,h]=(0,l.useState)(0),[c,y]=(0,l.useState)(null),[m,v]=(0,l.useState)([]),b=(0,l.useRef)(960),P=(0,l.useRef)(null),[M,w]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!1),T=(0,l.useRef)([]);(0,l.useEffect)(()=>{w(!0),u().then(()=>{console.log("Audio manager initialized from GameCanvas"),S(p())});{let t=document.createElement("canvas");t.width=960,t.height=540,e.current=t;let i=t.getContext("2d");if(i){let t=i.createLinearGradient(0,0,0,405);t.addColorStop(0,x.sky),t.addColorStop(1,"#FFDAB9"),i.fillStyle=t,i.fillRect(0,0,960,460),i.fillStyle=x.sun,i.beginPath(),i.arc(768,81,40,0,2*Math.PI),i.fill();let e=(t,e,a)=>{i.fillStyle="rgba(0, 0, 0, 0.2)",i.fillRect(t-2*a,460-e*a,4*a,e*a),i.beginPath(),i.arc(t,460-e*a,15*a,Math.PI,2*Math.PI,!1),i.fill(),i.beginPath(),i.arc(t-10*a,460-e*a+5*a,12*a,1.2*Math.PI,.2*Math.PI,!0),i.fill(),i.beginPath(),i.arc(t+10*a,460-e*a+5*a,12*a,.8*Math.PI,-.2*Math.PI,!1),i.fill()};e(192,60,.8),e(480,80,.7),e(864,70,.75),i.fillStyle=x.sand,i.fillRect(0,460,960,80),i.fillStyle="rgba(0,0,0,0.03)";for(let t=0;t<200;t++)i.beginPath(),i.arc(960*Math.random(),460+80*Math.random(),2*Math.random(),0,2*Math.PI),i.fill()}}let i=()=>{let e,i;if(!t.current)return;let a=t.current,l=a.parentElement;if(!l)return;let n=960/540,r=l.clientWidth,s=l.clientHeight;r/s>n?(i=s,e=s*n):(e=r,i=r/n),a.style.width="".concat(e,"px"),a.style.height="".concat(i,"px")};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i)}},[M,460]);let I=(0,l.useCallback)(()=>{console.log("Initializing game..."),y(new n(240,270,460)),T.current.forEach(t=>t.deactivate()),v([]),b.current=1135,h(0),g("backgroundMusic")},[460]);(0,l.useEffect)(()=>{0===i&&I(),1!==i||k?(2===i||3===i)&&g("backgroundMusic"):d("backgroundMusic")},[i,I,k]);let F=(0,l.useCallback)((t,e)=>t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y,[]);(0,l.useEffect)(()=>{if(1!==i||!c){P.current&&(cancelAnimationFrame(P.current),P.current=null);return}let e=t.current;if(!(null==e?void 0:e.getContext("2d")))return;let a=!1,l=()=>{if(a||!c||1!==i){P.current&&cancelAnimationFrame(P.current),P.current=null;return}c.update();let t=[...m],e=0===t.length;if(!e&&610>Math.max(...t.map(t=>t.x))&&(e=!0),e){let e=s(960,540,T.current);e.isActive&&!t.find(t=>t===e)&&t.push(e)}let n=[];for(let e of t)e.isActive&&(e.update(),!e.passed&&c.x>e.x+e.width&&(e.passed=!0,h(t=>t+1),d("score")),e.isOffScreen()?e.deactivate():n.push(e));if(v(n),(c.y+c.height>460||c.y<0)&&(r(3),d("gameOver"),a=!0),!a)for(let t of m){if(!t.isActive)continue;let e=c.getBounds(),i=t.getBoundsTop(),l=t.getBoundsBottom();if(F(e,i)||F(e,l)){r(3),d("gameOver"),a=!0;break}}a?(P.current&&cancelAnimationFrame(P.current),P.current=null):P.current=requestAnimationFrame(l)};return P.current=requestAnimationFrame(l),()=>{a=!0,P.current&&(cancelAnimationFrame(P.current),P.current=null)}},[i,c,m,o,460,F,I]),(0,l.useEffect)(()=>{if(!t.current||!M)return;let a=t.current,l=a.getContext("2d");if(!l)return;if(a.width=960,a.height=540,l.clearRect(0,0,960,540),e.current)l.drawImage(e.current,0,0);else{let t=l.createLinearGradient(0,0,0,405);t.addColorStop(0,x.sky),t.addColorStop(1,"#FFDAB9"),l.fillStyle=t,l.fillRect(0,0,960,460),l.fillStyle=x.sun,l.beginPath(),l.arc(768,81,40,0,2*Math.PI),l.fill();let e=(t,e,i)=>{l.fillStyle="rgba(0, 0, 0, 0.2)",l.fillRect(t-2*i,460-e*i,4*i,e*i),l.beginPath(),l.arc(t,460-e*i,15*i,Math.PI,2*Math.PI,!1),l.fill(),l.beginPath(),l.arc(t-10*i,460-e*i+5*i,12*i,1.2*Math.PI,.2*Math.PI,!0),l.fill(),l.beginPath(),l.arc(t+10*i,460-e*i+5*i,12*i,.8*Math.PI,-.2*Math.PI,!1),l.fill()};e(192,60,.8),e(480,80,.7),e(864,70,.75),l.fillStyle=x.sand,l.fillRect(0,460,960,80),l.fillStyle="rgba(0,0,0,0.03)";for(let t=0;t<200;t++)l.beginPath(),l.arc(960*Math.random(),460+80*Math.random(),2*Math.random(),0,2*Math.PI),l.fill()}1===i||2===i?(c&&c.draw(l,!1),m.forEach(t=>{t.isActive&&t.draw(l)})):3===i&&c?(c.draw(l,!0),m.forEach(t=>{t.isActive&&t.draw(l)})):0===i&&c&&c.draw(l,!1),l.textAlign="center",l.textBaseline="middle";let n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.textDark,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];l.font="bold ".concat(t,"px ").concat(i?"'Pacifico', ":"","'var(--font-geist-sans)'"),l.fillStyle=e,l.strokeStyle=x.textLight,l.lineWidth=t>30?4:3};if(0===i)n(60),l.strokeText("Flamingo Dash",480,170),l.fillText("Flamingo Dash",480,170),n(30,x.textDark,!1),l.strokeText("Click, Space, or Tap to Flap!",480,240),l.fillText("Click, Space, or Tap to Flap!",480,240);else if(1===i||2===i){n(48,x.textDark,!1),l.textAlign="left";let t="Score: ".concat(o),e=l.measureText(t).width;l.fillStyle="rgba(255, 255, 255, 0.7)",l.fillRect(10,15,e+20,53),l.strokeText(t,20,40),l.fillText(t,20,40),l.textAlign="center",2===i&&(l.fillStyle="rgba(0, 0, 0, 0.6)",l.fillRect(0,0,960,540),n(70,x.textLight),l.strokeText("Paused",480,270),l.fillText("Paused",480,270))}else 3===i&&(l.fillStyle="rgba(0, 0, 0, 0.7)",l.fillRect(0,0,960,540),n(70,x.accentCoral),l.strokeText("Game Over!",480,180),l.fillText("Game Over!",480,180),n(42,x.textLight),l.strokeText("Final Score: ".concat(o),480,250),l.fillText("Final Score: ".concat(o),480,250))},[i,o,M,c,m,460]);let E=t=>{t.stopPropagation(),(0===i||3===i)&&(I(),r(1))},C=t=>{t.stopPropagation(),2===i&&r(1)},A=(0,l.useCallback)(()=>{1===i&&c?(c.flap(),d("flap")):0===i&&(I(),r(1),d("flap"))},[i,c,I]);(0,l.useEffect)(()=>{let e=t=>{"Space"===t.code?(t.preventDefault(),A()):("p"===t.key||"P"===t.key)&&M&&(1===i?r(2):2===i&&r(1))},a=t.current,l=t=>{"touchstart"===t.type&&t.preventDefault(),A()};return document.addEventListener("keydown",e),M&&a&&(a.addEventListener("click",l),a.addEventListener("touchstart",l,{passive:!1})),()=>{document.removeEventListener("keydown",e),M&&a&&(a.removeEventListener("click",l),a.removeEventListener("touchstart",l))}},[i,A,M]);let R="px-8 py-4 rounded-xl shadow-xl font-bold text-lg transition-all duration-150 ease-in-out focus:outline-none focus:ring-4 focus:ring-opacity-70",B="".concat(R," bg-accentCoral hover:bg-opacity-80 active:bg-opacity-90 focus:ring-accentCoral text-textLight font-pacifico"),H="".concat(R," bg-accentYellow hover:bg-opacity-80 active:bg-opacity-90 focus:ring-accentYellow text-textDark font-pacifico");return(0,a.jsx)("div",{className:"w-full h-screen flex justify-center items-center bg-gray-900 touch-none overflow-hidden",style:{WebkitTapHighlightColor:"transparent"},children:(0,a.jsxs)("div",{className:"relative w-full h-full flex justify-center items-center",children:[" ",(0,a.jsx)("canvas",{ref:t,className:"border-2 border-gray-700 shadow-2xl rounded-lg bg-black block"}),(()=>{if(!M)return null;let t="absolute left-1/2 transform -translate-x-1/2 flex flex-col items-center space-y-4 z-10";return 0===i?(0,a.jsx)("div",{className:"".concat(t),style:{top:"70%"},children:(0,a.jsx)("button",{onClick:E,className:"".concat(B," text-3xl animate-pulse"),children:"Start Game"})}):2===i?(0,a.jsxs)("div",{className:"".concat(t),style:{top:"calc(50% + 80px)"},children:[" ",(0,a.jsx)("button",{onClick:C,className:"".concat(H),children:"Resume"})]}):3===i?(0,a.jsxs)("div",{className:"".concat(t),style:{top:"calc(50% + 40px)"},children:[" ",(0,a.jsx)("button",{onClick:E,className:"".concat(B),children:"Restart Game"})]}):null})()," ",M&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation();let e=f();S(e),e||1!==i||d("backgroundMusic")},className:"".concat(H," absolute top-4 right-4 z-20 text-sm px-3 py-1.5"),"aria-label":k?"Unmute":"Mute",children:k?"Unmute":"Mute"})]})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[441,684,358],()=>e(2836)),_N_E=t.O()}]);